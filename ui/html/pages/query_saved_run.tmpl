{{define "title"}}
Run SQL
{{end}}

{{define "content"}}
<div class="split" id="sqlrunner">

  {{template "query_single_row" .}}
  {{template "query_single_col" .}}



  <!-- quert start-->

  <div id="leftone" class=""  >


    <div class="maxheight72 p-1">

      
  

         <div :key="propertyName" v-for="(queries,propertyName) in savesQueries" class="">
          <ul class="list-group  list-group-flush ">
            <li>[[propertyName]]

          <div :id="propertyName">
            <div class="accordion-body">
              <ul class="list-group list-group-flush list-group-numbered">
                <li :key="query" v-for="(query,index) in queries" @click="showForm(query)" class="list-group-item"><button class="btn btn-link">[[query.name]]</button></li>
              </ul>
             
            </div>
          </div>
        </li>
        </ul>
             
        </div>
       


    </div>
  </div>
  <!-- quert end-->


  <!-- RESULT start-->




  <div id="midone" class=" maxheight72  px-3">
   <div>
    <br />
    [[currentQuery.catagory]] | [[currentQuery.name]]
    <br />
    <hr />
    <form  @submit="buildSQL" method="POST">
        <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
        <input type="hidden" name="savedqueryid" :value="[[currentQuery.id]]">

    
      <div v-for="field in queryFields" class="form-group" >
          <label :for="[[field.ID]]">[[field.Name]]</label>
          <input :id="[[field.ID]]" class="form-control" type="text"
          :name="[[field.Name]]"   :value='getFieldValue(field)'
          required>
          </input>
    
      </div>
      <br />
      <button type="submit" class="btn btn-primary">Run</button>

    </form>
 
    </div>
  </div>


  <div id="rightone" class=" maxheight72">



    {{template "query_result" .}}
     </div>

  <!-- RESULT end-->

</div>



<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" type="text/javascript"></script>


<script src="https://cdn.jsdelivr.net/npm/vue@2.6.12" type="text/javascript"></script>
<script src="https://ajaxorg.github.io/ace-builds/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

<script src="https://unpkg.com/axios/dist/axios.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js" type="text/javascript" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.6.0/split.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
 
 
<script>
 var csrftoken = '{{.CSRFToken}}'
 var splitmode = 3
 var savesQueries = {{toJson .SavesQueriesByCatagory}}
</script>

<script src="/static/js/textformat.js" type="text/javascript"></script>
<script src="/static/js/editoracevue.js" type="text/javascript"></script>
<script src="/static/js/query.js" type="text/javascript"></script>
<script src="/static/js/autoload.js" type="text/javascript"></script>
 
{{end}}